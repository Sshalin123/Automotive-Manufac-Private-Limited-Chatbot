version: '3.8'

# Development overrides for docker-compose.yml

services:
  api:
    build:
      context: ..
      dockerfile: docker/Dockerfile
    volumes:
      # Mount source code for hot reload
      - ../api:/app/api
      - ../ingest_ampl:/app/ingest_ampl
      - ../lead_scoring:/app/lead_scoring
      - ../retrieval:/app/retrieval
      - ../llm:/app/llm
      - ../config:/app/config
    environment:
      - DEBUG=true
      - RELOAD=true
      - LOG_LEVEL=DEBUG
    command: uvicorn api.main:app --host 0.0.0.0 --port 8000 --reload
